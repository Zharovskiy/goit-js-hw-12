{"version":3,"file":"commonHelpers.js","sources":["../src/img/dang.svg","../src/img/err.svg","../src/img/x.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__da6a1a3c__\"","export default \"__VITE_ASSET__33588f56__\"","export default \"__VITE_ASSET__6cc9f946__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport dangIcon from './img/dang.svg';\nimport errorIcon from './img/err.svg';\nimport xIcon from './img/x.svg';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\n\nconst lightbox = new SimpleLightbox('.gallery a', {captionDelay: 250, captionsData: 'alt'});\n\nconst form = document.querySelector('.form');\nconst imageList = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.loader-and-btn');\n\nform.addEventListener('submit', onSearch);\n\nlet memoryInput;\nlet pageNamber = 1;\nconst perPage = 15;\n\nfunction onSearch (event) {\n  event.preventDefault();\n  onBtnRemove();\n  const keyWord = event.target.keyword.value.trim();\n  if (keyWord) {\n    if(memoryInput !== keyWord) {\n      pageNamber = 1;\n    }\n    memoryInput = keyWord;\n    imageList.innerHTML = '';\n    loadBtn.insertAdjacentHTML('afterbegin', '<span class=\"loader\"></span>');\n    onRequest();\n    form.reset();\n  }\n}\n\nfunction onBtnRemove () {\n  const btnLoadMore = document.querySelector('.btn-load-more');\n  if(btnLoadMore !== null) {\n    btnLoadMore.remove();\n  }\n}\n\nfunction onRequest () {\n  axiosRequest()\n    .then(({data}) => renderImage(data))\n    .catch((error) => onRejected(error));\n}\n\nasync function axiosRequest() {\n  axios.defaults.baseURL = 'https://pixabay.com';\n  return await axios.get('api/', {\n    params: {\n      key: '42096263-920755fbf423cd5814494514c',\n      q: memoryInput,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: pageNamber,\n      per_page: perPage\n    }\n  });\n}\n\nfunction renderImage({totalHits, hits}) {\n  onLoaderRemove();\n  if (parseInt(totalHits) > 0) {\n    if (imageList.innerHTML === '' && totalHits > perPage) {\n      loadBtn.insertAdjacentHTML('beforeend', '<button class=\"btn-load-more\">Load more</button>');\n    }\n    const markup = hits.map(createElementGallery).join('');\n    imageList.insertAdjacentHTML('beforeend', markup);\n    \n    const btnLoadMore = document.querySelector('.btn-load-more');\n    btnLoadMore.addEventListener('click', loadMoreImages);\n    lightbox.refresh();\n  }else{\n    onWarning();\n  }    \n}\n\nfunction onLoaderRemove () {\n  const loader = document.querySelector('.loader');\n  if(loader !== null) {\n    loader.remove();\n  }\n}\n\nfunction loadMoreImages () {\n  loadBtn.insertAdjacentHTML('afterbegin', '<span class=\"loader\"></span>');\n  pageNamber += 1;\n  onRequest();\n}\n\nfunction createElementGallery({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) {\n  return `\n<ul class=\"card\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n  </a>\n  <ul class=\"item-img\">\n    <li class=\"elem-img\">\n      <p class=\"elem-name\">Likes</p>\n      <p>${likes}</p>\n    </li>\n    <li class=\"elem-img\">\n      <p class=\"elem-name\">Views</p>\n      <p>${views}</p>\n    </li>\n    <li class=\"elem-img\">\n      <p class=\"elem-name\">Comments</p>\n      <p>${comments}</p>\n    </li>\n    <li class=\"elem-img\">\n      <p class=\"elem-name\">Downloads</p>\n      <p>${downloads}</p>\n    </li>\n  </ul>\n</ul>\n`}\n\nfunction onWarning() {\n  iziToast.warning({\n    title: 'Sorry,',\n    titleColor: '#FFFFFF',\n    message: 'there are no images matching your search query. Please try again!',\n    messageColor: '#FFFFFF',\n    messageSize: '16px',\n    backgroundColor: '#FFA000',\n    iconUrl: dangIcon,\n    position: 'center',\n    close: false,\n    buttons: [\n      [\n        `<button type=\"button\" style=\"\n          background-color: #FFA000; \n          width: 20px; \n          height: 20px; \n          padding: 5px\">\n            <img style=\"\n              width: 10px; \n              height: 10px\" \n              src=${xIcon}>\n        </button>`,\n        function (instance, toast) {\n          instance.hide({ transitionOut: 'fadeOut' }, toast);\n        },\n      ],\n    ]\n  });\n}\n\nfunction onRejected(error) {\n  iziToast.show({\n    title: 'Error',\n    titleColor: '#FFFFFF',\n    message: `${error}`,\n    messageColor: '#FFFFFF',\n    messageSize: '16px',\n    backgroundColor: '#EF4040',\n    iconUrl: errorIcon,\n    position: 'topRight',\n    close: false,\n    buttons: [\n      [\n        `<button type=\"button\" style=\"\n          background-color: #EF4040; \n          width: 20px; \n          height: 20px; \n          padding: 5px\">\n            <img style=\"\n              width: 10px; \n              height: 10px\" \n                src=${xIcon}>\n        </button>`,\n        function (instance, toast) {\n          instance.hide({ transitionOut: 'fadeOut' }, toast);\n        },\n      ],\n    ]\n  });\n};\n\n"],"names":["dangIcon","errorIcon","xIcon","lightbox","SimpleLightbox","form","imageList","loadBtn","onSearch","memoryInput","pageNamber","perPage","event","onBtnRemove","keyWord","onRequest","btnLoadMore","axiosRequest","data","renderImage","error","onRejected","axios","totalHits","hits","onLoaderRemove","markup","createElementGallery","loadMoreImages","onWarning","loader","webformatURL","largeImageURL","tags","likes","views","comments","downloads","iziToast","instance","toast"],"mappings":"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"}