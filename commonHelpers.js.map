{"version":3,"file":"commonHelpers.js","sources":["../src/img/dang.svg","../src/img/err.svg","../src/img/x.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__da6a1a3c__\"","export default \"__VITE_ASSET__33588f56__\"","export default \"__VITE_ASSET__6cc9f946__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport dangIcon from './img/dang.svg';\nimport errorIcon from './img/err.svg';\nimport xIcon from './img/x.svg';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\n\nconst lightbox = new SimpleLightbox('.gallery a', {captionDelay: 250, captionsData: 'alt'});\n\nconst form = document.querySelector('.form');\nconst imageList = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.loader-and-btn');\n\nform.addEventListener('submit', onSearch);\n\nlet memoryInput;\nlet pageNumber;\nlet perPage;\n\nfunction onSearch (event) {\n  event.preventDefault();\n  removeLoadMoreButton();\n  const keyWord = event.target.keyword.value.trim();\n  if (keyWord) {\n    pageNumber = 1;\n    perPage = 15;\n    memoryInput = keyWord;\n    imageList.innerHTML = '';\n    loadImages();\n    form.reset();\n  }\n}\n\nfunction removeLoadMoreButton () {\n  const btnLoadMore = document.querySelector('.btn-load-more');\n  if(btnLoadMore !== null) {\n    btnLoadMore.removeEventListener('click', loadImages);\n    btnLoadMore.remove();\n  }\n}\n\nasync function loadImages () {\n  loadBtn.insertAdjacentHTML('afterbegin', '<span class=\"loader\"></span>');\n  try {\n    const response = await axiosRequest();\n    pageNumber += 1;\n    renderImage(response.data);\n  }\n  catch (error) {\n    showIziToast({\n      message: error.message,\n      backgroundColor: '#EF4040',\n      iconUrl: errorIcon\n    });\n  }\n}\n\nasync function axiosRequest() {\n  axios.defaults.baseURL = 'https://pixabay.com';\n  return axios.get('api/', {\n    params: {\n      key: '42096263-920755fbf423cd5814494514c',\n      q: memoryInput,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: pageNumber,\n      per_page: perPage\n    }\n  });\n}\n\nfunction renderImage({totalHits, hits}) {\n  onLoaderRemove();\n  if (parseInt(totalHits) > 0) {\n    const totalPages = Math.ceil(totalHits / perPage);\n\n    if (imageList.innerHTML === '' && totalHits > perPage) {\n      loadBtn.insertAdjacentHTML('beforeend', '<button class=\"btn-load-more\">Load more</button>');\n      const btnLoadMore = document.querySelector('.btn-load-more');\n      btnLoadMore.addEventListener('click', loadImages);\n    }\n\n    if (pageNumber > totalPages) {\n      removeLoadMoreButton();\n      showIziToast({\n        message: `We're sorry, but you've reached the end of search results.`,\n        backgroundColor: '#FFA000',\n        iconUrl: dangIcon\n      });\n    }\n\n    const markup = hits.map(createElementGallery).join('');\n    imageList.insertAdjacentHTML('beforeend', markup);\n\n    if (pageNumber > 2) {\n      scrollToNewImages();\n    }\n    \n    lightbox.refresh();\n  }else{\n    showIziToast({\n      message: error.message,\n      backgroundColor: '#EF4040',\n      iconUrl: errorIcon\n    });\n  }    \n}\n\nfunction scrollToNewImages () {\n  const elemCard = document.querySelector('.card');\n  const getItemCoords = elemCard.getBoundingClientRect();\n  window.scrollBy({\n    top: getItemCoords.height * 2,\n    left: getItemCoords.left, \n    behavior: 'smooth',\n  });\n}\n\nfunction onLoaderRemove () {\n  const loader = document.querySelector('.loader');\n  if(loader !== null) {\n    loader.remove();\n  }\n}\n\nfunction createElementGallery({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) {\n  return `\n<ul class=\"card\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n  </a>\n  <ul class=\"item-img\">\n    <li class=\"elem-img\">\n      <p class=\"elem-name\">Likes</p>\n      <p>${likes}</p>\n    </li>\n    <li class=\"elem-img\">\n      <p class=\"elem-name\">Views</p>\n      <p>${views}</p>\n    </li>\n    <li class=\"elem-img\">\n      <p class=\"elem-name\">Comments</p>\n      <p>${comments}</p>\n    </li>\n    <li class=\"elem-img\">\n      <p class=\"elem-name\">Downloads</p>\n      <p>${downloads}</p>\n    </li>\n  </ul>\n</ul>\n`}\n\nfunction showIziToast({message, backgroundColor, iconUrl}) {\n  onLoaderRemove();\n  iziToast.show({\n    titleColor: '#FFFFFF',\n    message: `${message}`,\n    messageColor: '#FFFFFF',\n    messageSize: '16px',\n    backgroundColor: `${backgroundColor}`,\n    iconUrl: `${iconUrl}`,\n    position: 'topRight',\n    close: false,\n    buttons: [\n      [\n        `<button type=\"button\" style=\"\n          background-color: ${backgroundColor}; \n          width: 20px; \n          height: 20px; \n          padding: 5px\">\n            <img style=\"\n              width: 10px; \n              height: 10px\" \n                src=${xIcon}>\n        </button>`,\n        function (instance, toast) {\n          instance.hide({ transitionOut: 'fadeOut' }, toast);\n        },\n      ],\n    ]\n  });\n};\n"],"names":["dangIcon","errorIcon","xIcon","lightbox","SimpleLightbox","form","imageList","loadBtn","onSearch","memoryInput","pageNumber","perPage","event","removeLoadMoreButton","keyWord","loadImages","btnLoadMore","response","axiosRequest","renderImage","error","showIziToast","axios","totalHits","hits","onLoaderRemove","totalPages","markup","createElementGallery","scrollToNewImages","getItemCoords","loader","webformatURL","largeImageURL","tags","likes","views","comments","downloads","message","backgroundColor","iconUrl","iziToast","instance","toast"],"mappings":"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"}