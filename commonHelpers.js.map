{"version":3,"file":"commonHelpers.js","sources":["../src/img/dang.svg","../src/img/err.svg","../src/img/x.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__da6a1a3c__\"","export default \"__VITE_ASSET__33588f56__\"","export default \"__VITE_ASSET__6cc9f946__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport dangIcon from './img/dang.svg';\nimport errorIcon from './img/err.svg';\nimport xIcon from './img/x.svg';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\n\nconst lightbox = new SimpleLightbox('.gallery a', {captionDelay: 250, captionsData: 'alt'});\n\nconst form = document.querySelector('.form');\nconst imageList = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.loader-and-btn');\n\nform.addEventListener('submit', onSearch);\n\nlet memoryInput;\nlet pageNumber = 1;\nlet perPage = 15;\nlet totalQuntityImg;\n\n\nfunction onSearch (event) {\n  event.preventDefault();\n  onBtnRemove();\n  onMessageRemove();\n  const keyWord = event.target.keyword.value.trim();\n  if (keyWord) {\n    pageNumber = 1;\n    perPage = 15;\n    memoryInput = keyWord;\n    imageList.innerHTML = '';\n    onRequest();\n    form.reset();\n  }\n}\n\nfunction onBtnRemove () {\n  const btnLoadMore = document.querySelector('.btn-load-more');\n  if(btnLoadMore !== null) {\n    btnLoadMore.removeEventListener('click', maxQuntityPage);\n    btnLoadMore.remove();\n  }\n}\n\nfunction onMessageRemove () {\n  const message = document.querySelector('.is-not-images');\n  if(message !== null) {\n    message.remove();\n  }\n}\n\nfunction onRequest () {\n  loadBtn.insertAdjacentHTML('afterbegin', '<span class=\"loader\"></span>');\n  axiosRequest()\n    .then(({data}) => {\n      pageNumber += 1;\n      renderImage(data)\n    })\n    .catch((error) => onRejected(error));\n}\n\nasync function axiosRequest() {\n  axios.defaults.baseURL = 'https://pixabay.com';\n  return await axios.get('api/', {\n    params: {\n      key: '42096263-920755fbf423cd5814494514c',\n      q: memoryInput,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: pageNumber,\n      per_page: perPage\n    }\n  });\n}\n\nfunction maxQuntityPage () {\n  const remainder = totalQuntityImg % perPage;\n  const quantityPage = ((totalQuntityImg - remainder) / perPage) + 1; \n  if (pageNumber === quantityPage) {\n    perPage = remainder;\n    onRequest();\n    onBtnRemove();\n    loadBtn.insertAdjacentHTML('beforeend', `<p class=\"is-not-images\">We're sorry, but you've reached the end of search results.</p>`);\n  } else {\n    onRequest();\n  }\n}\n\nfunction renderImage({totalHits, hits}) {\n  onLoaderRemove();\n  if (parseInt(totalHits) > 0) {\n    totalQuntityImg = totalHits;\n\n    if (imageList.innerHTML === '' && totalHits > perPage) {\n      loadBtn.insertAdjacentHTML('beforeend', '<button class=\"btn-load-more\">Load more</button>');\n      const btnLoadMore = document.querySelector('.btn-load-more');\n      btnLoadMore.addEventListener('click', maxQuntityPage);\n    }\n\n    const markup = hits.map(createElementGallery).join('');\n    imageList.insertAdjacentHTML('beforeend', markup);\n\n    if (pageNumber > 2) {\n      onScroll();\n    }\n    \n    lightbox.refresh();\n  }else{\n    onWarning();\n  }    \n}\n\nfunction onScroll () {\n  const elemCard = document.querySelector('.card');\n  const getItemCoords = elemCard.getBoundingClientRect();\n  window.scrollBy({\n    top: getItemCoords.height * 2,\n    left: getItemCoords.left, \n    behavior: 'smooth',\n  });\n}\n\nfunction onLoaderRemove () {\n  const loader = document.querySelector('.loader');\n  if(loader !== null) {\n    loader.remove();\n  }\n}\n\nfunction createElementGallery({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) {\n  return `\n<ul class=\"card\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n  </a>\n  <ul class=\"item-img\">\n    <li class=\"elem-img\">\n      <p class=\"elem-name\">Likes</p>\n      <p>${likes}</p>\n    </li>\n    <li class=\"elem-img\">\n      <p class=\"elem-name\">Views</p>\n      <p>${views}</p>\n    </li>\n    <li class=\"elem-img\">\n      <p class=\"elem-name\">Comments</p>\n      <p>${comments}</p>\n    </li>\n    <li class=\"elem-img\">\n      <p class=\"elem-name\">Downloads</p>\n      <p>${downloads}</p>\n    </li>\n  </ul>\n</ul>\n`}\n\nfunction onWarning() {\n  onLoaderRemove();\n  iziToast.warning({\n    title: 'Sorry,',\n    titleColor: '#FFFFFF',\n    message: 'there are no images matching your search query. Please try again!',\n    messageColor: '#FFFFFF',\n    messageSize: '16px',\n    backgroundColor: '#FFA000',\n    iconUrl: dangIcon,\n    position: 'center',\n    close: false,\n    buttons: [\n      [\n        `<button type=\"button\" style=\"\n          background-color: #FFA000; \n          width: 20px; \n          height: 20px; \n          padding: 5px\">\n            <img style=\"\n              width: 10px; \n              height: 10px\" \n              src=${xIcon}>\n        </button>`,\n        function (instance, toast) {\n          instance.hide({ transitionOut: 'fadeOut' }, toast);\n        },\n      ],\n    ]\n  });\n}\n\nfunction onRejected(error) {\n  onLoaderRemove();\n  iziToast.show({\n    title: 'Error',\n    titleColor: '#FFFFFF',\n    message: `${error}`,\n    messageColor: '#FFFFFF',\n    messageSize: '16px',\n    backgroundColor: '#EF4040',\n    iconUrl: errorIcon,\n    position: 'topRight',\n    close: false,\n    buttons: [\n      [\n        `<button type=\"button\" style=\"\n          background-color: #EF4040; \n          width: 20px; \n          height: 20px; \n          padding: 5px\">\n            <img style=\"\n              width: 10px; \n              height: 10px\" \n                src=${xIcon}>\n        </button>`,\n        function (instance, toast) {\n          instance.hide({ transitionOut: 'fadeOut' }, toast);\n        },\n      ],\n    ]\n  });\n};\n\n"],"names":["dangIcon","errorIcon","xIcon","lightbox","SimpleLightbox","form","imageList","loadBtn","onSearch","memoryInput","pageNumber","perPage","totalQuntityImg","event","onBtnRemove","onMessageRemove","keyWord","onRequest","btnLoadMore","maxQuntityPage","message","axiosRequest","data","renderImage","error","onRejected","axios","remainder","quantityPage","totalHits","hits","onLoaderRemove","markup","createElementGallery","onScroll","onWarning","getItemCoords","loader","webformatURL","largeImageURL","tags","likes","views","comments","downloads","iziToast","instance","toast"],"mappings":"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"}